{% extends "base.html" %}
{% block title %}Chat - Poring AI{% endblock %}

{% block content %}
<h2 class="mb-3">Chat with Poring AI</h2>

<form method="post" class="mb-3">
  <div class="mb-2">
    <label for="question" class="form-label">Your Message:</label>
    <textarea name="question" id="question" class="form-control" rows="3">{{ question or "" }}</textarea>
  </div>
  <button type="submit" class="btn btn-primary">Send</button>
</form>

{% if answer %}
<div class="card mb-3">
  <div class="card-header">AI Response</div>
  <div class="card-body">
    <p class="card-text" style="white-space: pre-line;">{{ answer }}</p>
  </div>
</div>
{% endif %}

{% if structured %}
<div class="card">
  <div class="card-header">Query Result</div>
  <div class="card-body">
    <div>허브: {{ structured.hub_name }}</div>
    <div>조회 성공: {{ '예' if structured.found else '아니오' }}</div>
    <div>이용가능 대수: {{ structured.available_bikes }}</div>
  </div>
</div>
{% endif %}

<a href="{{ url_for('index') }}">Go back to Home</a>
{% endblock %}
